<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>AJAX（阿贾克斯）</title>
</head>

<body>
    <script src="../tools.js"></script>
    <script>
        // 解决异步的第一个办法（ES5）：回调函数
        // ajax("get", "./data.json", "", function(msg) {
        //     console.log(msg);
        // });


        ajax({
            url: './data.json',
            type: 'get',
            data: 'username=zhangsan',
            success: function(msg) {
                console.log(msg);
            }
        });


        // AJAX：
        // A:asynchronous：异步
        // J:JavaScript
        // A:and
        // X:XML

        // AJAX：可以实现与服务端异步通信、局部刷新页面

        // 工作原理：
        // 1. 创建 XMLHttpRequest 对象
        // let xhr = new XMLHttpRequest();
        // // 2. 打开连接
        // // xhr.open(请求方式, 请求的资源路径, 是否异步);
        // xhr.open("get", "./data.json?username=zhangsan", true);
        // // 3. 发送请求
        // //  1) 如果请求方式是 get。请求数据放在资源路径后面。
        // //  2）如果请求方式是 post。请求数据放在send方法的参数中。
        // xhr.send("username=zhangsan");
        // // 4. 处理服务端返回的消息
        // // let data = xhr.responseText;  // 同步处理消息的方式
        // // 异步处理消息的方式
        // // readyState: 
        // // 0: 请求未初始化（send方法还没调用）
        // // 1：服务端和客户端建立连接（send方法调用了，正在发送请求）
        // // 2：请求已被服务端接收（send方法执行完成）
        // // 3：请求处理中
        // // 4：请求处理完成，响应就绪。
        // xhr.onreadystatechange = function() {
        //     if(xhr.readyState == 4 && xhr.status == 200) {
        //         let data = xhr.responseText;
        //         console.log(JSON.parse(data));
        //     }
        // }

    </script>
</body>

</html>